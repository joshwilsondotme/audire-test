{
  "name": "postcss-css-variables",
  "version": "0.9.0",
  "description": "PostCSS plugin to transform CSS Custom Properties(CSS variables) syntax into a static representation",
  "keywords": [
    "postcss",
    "css",
    "postcss-plugin"
  ],
  "author": {
    "name": "Eric Eastwood",
    "email": "contact@ericeastwood.com",
    "url": "http://ericeastwood.com/"
  },
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/MadLittleMods/postcss-css-variables.git"
  },
  "dependencies": {
    "escape-string-regexp": "^1.0.3",
    "extend": "^3.0.1",
    "postcss": "^6.0.8"
  },
  "devDependencies": {
    "bluebird": "^3.5.0",
    "chai": "^4.1.1",
    "chai-as-promised": "^7.1.1",
    "cssnano": "^4.0.0",
    "eslint": "^4.4.1",
    "eslint-plugin-react": "^7.1.0",
    "mocha": "^3.5.0",
    "postcss-discard-comments": "^4.0.0",
    "postcss-normalize-whitespace": "^4.0.0"
  },
  "scripts": {
    "test": "mocha",
    "lint": "eslint ."
  },
  "gitHead": "6712e6d5db7c004e544b61ce3fd4058a86aed249",
  "readme": "# PostCSS CSS Variables\n\n[![npm version](https://badge.fury.io/js/postcss-css-variables.svg)](http://badge.fury.io/js/postcss-css-variables) [![Build Status](https://travis-ci.org/MadLittleMods/postcss-css-variables.svg)](https://travis-ci.org/MadLittleMods/postcss-css-variables) [![Gitter](https://badges.gitter.im/MadLittleMods/postcss-css-variables.svg)](https://gitter.im/MadLittleMods/postcss-css-variables?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)\n\n[PostCSS](https://github.com/postcss/postcss) plugin to transform [`CSS Custom Properties (CSS variables)`](http://dev.w3.org/csswg/css-variables/) syntax into a static representation. This plugin provides a future-proof way of using **most** of CSS variables features, including selector cascading with some caveats, because this can only see the CSS, not the potentially dynamic HTML and DOM the CSS is applied to.\n\n### Install\n\n```\nnpm install postcss-css-variables --save-dev\n```\n\n### Table of Contents\n\n - [Code Playground](#code-playground)\n - [Usage](#usage)\n - [Syntax](#syntax)\n\t - [Defining Custom Properties with `--*`](#defining-custom-properties-with---)\n\t - [Using Variables/Custom Properties with `var()`](#using-variables-custom-properties-with-var)\n - [Features](#features)\n\t - [At-rules like `@media`, `@support`, etc.](#at-rules-like-media-support-etc)\n\t - [Pseudo-classes and Elements](#pseudo-classes-and-elements)\n\t - [Nested Rules](#nested-rules)\n\t - [`calc()`](#calc)\n - [Why?](#why)\n\t - [Interoperability](#interoperability)\n\t - [Differences from `postcss-custom-properties`](#differences-from-postcss-custom-properties)\n - [Caveats](#caveats)\n - [Options](#options)\n - [Quick Reference/Notes](#quick-referencenotes)\n - [Testing](#testing)\n - [Changelog](https://github.com/MadLittleMods/postcss-css-variables/blob/master/CHANGELOG.md)\n\n\n# [Code Playground](https://madlittlemods.github.io/postcss-css-variables/playground/)\n\n[Try it in the playground](https://madlittlemods.github.io/postcss-css-variables/playground/) and see what you think! Just add some CSS and see to see the final transformed/compiled CSS. You can try anything here in the playground, too.\n\n\n# Usage\n\n[*For more general PostCSS usage, look here.*](https://github.com/postcss/postcss#usage)\n\n```js\nvar postcss = require('postcss');\nvar cssvariables = require('postcss-css-variables');\n\nvar fs = require('fs');\n\nvar mycss = fs.readFileSync('input.css', 'utf8');\n\n// Process your CSS with postcss-css-variables\nvar output = postcss([\n\t\tcssvariables(/*options*/)\n\t])\n\t.process(mycss)\n\t.css;\n\nconsole.log(output);\n```\n\n\n# Syntax\n\n### Defining Custom Properties with `--*`\n\nA custom property is any property whose name starts with two dashes `--`. A property must be in a rule.\n\n*Note: `:root` is nothing more than the selector for the root DOM node. Any other selector like `.class`, `#id`, or even `#foo ~ .bar > span.baz` works.*\n\n```css\n:root {\n\t--foo-width: 100px;\n\t--foo-bg-color: rgba(255, 0, 0, 0.85);\n}\n\n.foo {\n\t--foo-width: 100px;\n\t--foo-bg-color: rgba(255, 0, 0, 0.85);\n}\n```\n\nCustom properties can be declared multiple times, but like variable scope in other languages, only the most specific one takes precedence.\n\n```css\n:root {\n    --some-color: red;\n}\n\n.foo {\n    /* red */\n    color: var(--some-color);\n}\n\n\n.bar {\n    --some-color: blue;\n    /* blue */\n    color: var(--some-color);\n}\n\n.bar:hover {\n    --some-color: green;\n    /* Automically gets a `color: green;` declaration because we `--some-color` used within scope elsewhere */\n}\n```\n\n*[W3C Draft: CSS Custom Properties for Cascading Variables, section 2](http://dev.w3.org/csswg/css-variables/#defining-variables)*\n\n### Using Variables/Custom Properties with `var()`\n\n```css\n.foo {\n\twidth: var(--foo-width);\n\t/* You can even provide a fallback */\n\tbackground: var(--foo-bg-color, #ff0000);\n}\n```\n\n*[W3C Draft: CSS Custom Properties for Cascading Variables, section 3](http://dev.w3.org/csswg/css-variables/#using-variables)*\n\n\n# Features\n\n### At-rules like `@media`, `@support`, etc.\n\nIt's perfectly okay to declare CSS variables inside media queries and the like. It'll work just as you would expect.\n\n```css\n:root {\n\t--width: 100px;\n}\n\n@media (max-width: 1000px) {\n\t:root {\n\t\t--width: 200px;\n\t}\n}\n\n.box {\n\twidth: var(--width);\n}\n```\n\nWill be transformed to:\n\n```css\n.box {\n\twidth: 100px;\n}\n\n@media (max-width: 1000px) {\n\t.box {\n\t\twidth: 200px;\n\t}\n}\n```\n\n### Pseudo-classes and Elements\n\nPsuedo-classes are also dealt with correctly, because it's easy to statically determine.\n\n```css\n.foo {\n\t--foo-color: red;\n\tcolor: var(--foo-color);\n}\n\n.foo:hover {\n\t--foo-color: green;\n}\n```\n\nWill be transformed to:\n\n```css\n.foo {\n\tcolor: red;\n}\n\n.foo:hover {\n\tcolor: green;\n}\n```\n\n### Nested Rules\n\nThis pairs very well with [`postcss-nested`](https://github.com/postcss/postcss-nested) or [`postcss-nesting`](https://github.com/jonathantneal/postcss-nesting), adding support for nested rules. For either, you must put the plugin before `postcss-css-variables` in the plugin stack so that the `&` references are expanded first (`postcss-css-variables` doesn't understand them). For example, with `postcss-nested`, your PostCSS setup would look like this:\n\n\n```js\nvar postcss = require('postcss');\nvar cssvariables = require('postcss-css-variables');\nvar nested = require('postcss-nested');\n\nvar fs = require('fs');\n\nvar mycss = fs.readFileSync('input.css', 'utf8');\n\nvar output = postcss([\n\t\t// Flatten/unnest rules\n\t\tnested,\n\t\t// Then process any CSS variables\n\t\tcssvariables(/*options*/)\n\t])\n\t.process(mycss)\n\t.css;\n\nconsole.log(output);\n```\n\nFor a simple example with nesting:\n\n```css\n.box-foo {\n\t--some-width: 150px;\n\twidth: var(--some-width);\n\n\t.box-bar {\n\t\twidth: var(--some-width);\n\t}\n}\n```\n\nWith also `postcss-nesting`, this will be transformed to:\n\n```css\n.box-foo {\n\twidth: 150px;\n}\n\n.box-foo .box-bar {\n\twidth: 150px;\n}\n```\n\nFor a more complex example with a media query:\n\n```css\n:root {\n\t--some-width: 150px;\n}\n\n.box-foo {\n\twidth: var(--some-width);\n\n\t.box-bar {\n\t\twidth: var(--some-width);\n\t}\n}\n\n@media (max-width: 800px) {\n\t.box-foo {\n\t\t--some-width: 300px;\n\t}\n}\n```\n\nWill be transformed to:\n\n```css\n.box-foo {\n\twidth: 150px;\n}\n\n.box-foo .box-bar {\n\twidth: 150px;\n}\n\n@media (max-width: 800px) {\n\t.box-foo {\n\t\twidth: 300px;\n\t}\n\n\t.box-foo .box-bar {\n\t\twidth: 300px;\n\t}\n}\n```\n\n\n\n# Why?\n\nThis plugin was spawned out of a [discussion on the `cssnext` repo](https://github.com/cssnext/cssnext/issues/99) and a personal need.\n\nThere is another similar plugin available, [`postcss-custom-properties`](https://github.com/postcss/postcss-custom-properties), although it restricts itself much more than this plugin, preferring partial spec conformance. This plugin has the same capabilities but also adds imperfect feature support which stem from not being to know what the DOM will look like when you compile your CSS. We instead look at the explicit structure of your CSS selectors.\n\n### Interoperability and differences from `postcss-custom-properties`\n\nPutting `postcss-css-variables` in place of `postcss-custom-properties` should work out of the box.\n\nIn [`postcss-custom-properties`](https://github.com/postcss/postcss-custom-properties), CSS variable declarations are specifically restricted to the `:root` selector.\n\nIn `postcss-css-variables`, this is not the case and they may be declared inside any rule with whatever selector. The variables are substituted based on statically known CSS selector inheritance.\n\nHere's a quick overview of the differences:\n\n - CSS variables may be declared in any selector like `.foo` or `.foo .bar:hover`, and is not limited to just `:root`\n - CSS variables may be declared in `@media`, `@support`, and other at-rules.\n - CSS variables may be declared in `:hover` and other psuedo-classes, which get expanded properly.\n - Variables in nested rules can be deduced with the help of [`postcss-nested`](https://github.com/postcss/postcss-nested) or [`postcss-nesting`](https://github.com/jonathantneal/postcss-nesting).\n\nContinue to the next section to see where some of these might be unsafe to do. There are reasons behind the ethos of why the other plugin, [`postcss-custom-properties`](https://github.com/postcss/postcss-custom-properties), is very limited in what it supports, due to differing opinions on what is okay to support.\n\n\n# Caveats\n\nWhen you declare a CSS variable inside one selector, but consume it in another, this does make an unsafe assumption about it which can be non-conforming in certain edge cases. Here is an example where these limitations result in non-conforming behavior.\n\nNote the nested markup below. We only know about the DOM's inheritance from your CSS selectors. If you want nest multiple times, you need to be explicit about it in your CSS which isn't necessary with browser that natively support CSS variables. See the innermost `<h1 class=\"title\">`\n\n```html\n<div class=\"component\">\n    Black\n\n    <div class=\"title\">\n        Blue\n\n        <div class=\"decoration\">\n            Green\n\n            <div class=\"title\">Blue with this plugin, but green per spec</div>\n        </div>\n    </div>\n</div>\n```\n\n```css\n.component {\n  --text-color: blue;\n}\n\n.component .title {\n  color: var(--text-color);\n}\n\n.component .decoration {\n  --text-color: green;\n  color: var(--text-color);\n}\n```\n\n\n[`postcss-custom-properties`](https://github.com/postcss/postcss-custom-properties) avoids this problem entirely by restricting itself to just the `:root` selector. This is because the developers there would prefer to not support a feature instead of something almost-spec-compliant like what `postcss-css-variables` does.\n\n\n# Options\n\n### `preserve` (default: `false`)\n\nAllows you to preserve custom properties & var() usage in output.\n\nPossible values:\n\n - `false`: Removes `--var` declarations and replaces `var()` with their resolved/computed values.\n - `true`: Keeps `var()` declarations in the output and has the computed value as a fallback declaration. Also keeps computed `--var` declarations.\n - `'computed'`: Keeps computed `--var` declarations in the output. Handy to make them available to your JavaScript.\n\n### `variables` (default: `{}`)\n\nDefine an object map of variables in JavaScript that will be declared at the `:root` scope.\n\nCan be a simple key-value pair or an object with a `value` property and an optional `isImportant` bool property.\n\nThe object keys are automatically prefixed with `--` (according to CSS custom property syntax) if you do not provide it.\n\n### `preserveInjectedVariables` (default: `true`)\n\nWhether to preserve the custom property declarations inserted via the `variables` option from final output.\n\nA typical use case is [CSS Modules](https://github.com/css-modules/css-modules), where you would want to avoid\nrepeating custom property definitions in every module passed through this plugin. Setting this option to `false`\nprevents JS-injected variables from appearing in output CSS.\n\n```js\nvar postcss = require('postcss');\nvar cssvariables = require('postcss-css-variables');\n\npostcss([\n\tcssvariables({\n\t\tvariables: {\n\t\t\t'--some-var': '100px',\n\t\t\t'--other-var': {\n\t\t\t\tvalue: '#00ff00'\n\t\t\t},\n\t\t\t'--important-var': {\n\t\t\t\tvalue: '#ff0000',\n\t\t\t\tisImportant: true\n\t\t\t}\n\t\t}\n\t})\n])\n.process(css, opts);\n```\n\n\n# Quick Reference/Notes\n\n - This plugin was spawned out of a [discussion on the `cssnext` repo](https://github.com/cssnext/cssnext/issues/99)\n - We provide a larger CSS variable feature subset than [`postcss-custom-properties`](https://github.com/postcss/postcss-custom-properties).\n - Related links and issues:\n \t - [var declared in media query should pull in properties that use/reference that var *on `cssnext/cssnext`*](https://github.com/cssnext/cssnext/issues/99)\n \t - [Investigate support for media-query scoped properties *on `postcss/postcss-custom-properties`*](https://github.com/postcss/postcss-custom-properties/issues/9)\n \t - [remove `:root` limitation by injecting rules with new declarations that just contains modified properties. *on `postcss/postcss-custom-properties`*](https://github.com/postcss/postcss-custom-properties/issues/1)\n\n\n# Testing\n\nWe have a suite of [Mocha](http://mochajs.org/) tests. If you see something that doesn't have coverage, make an issue or pull request.\n\nRun once:\n\n`npm install`\n\nRun whenever you want to test:\n\n`npm run test`\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/MadLittleMods/postcss-css-variables/issues"
  },
  "homepage": "https://github.com/MadLittleMods/postcss-css-variables#readme",
  "_id": "postcss-css-variables@0.9.0",
  "_shasum": "f5631f97472ab85cd95f4ba752a56617aba92702",
  "_from": "git+https://github.com/CodyHouse/postcss-css-variables.git",
  "_resolved": "git+https://github.com/CodyHouse/postcss-css-variables.git#6712e6d5db7c004e544b61ce3fd4058a86aed249"
}
